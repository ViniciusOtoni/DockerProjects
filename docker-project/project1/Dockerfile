FROM node

WORKDIR /app




COPY package.json /app

RUN npm install

COPY . /app


ARG DEFAULT_PORT=80 


ENV PORT $DEFAULT_PORT


EXPOSE $PORT

VOLUME [ "/app/node_modules" ] 
# ESTOU CRIANDO ESSE VOLUME COM O NODE_MODULES POIS ESTOU COLOCANDO TODO O DIRETÓRIO DENTRO DE UM BIND MOUNT E NÃO TENHO O NODE_MODULE NO PROJETO 
# ASSIM O CONTAINER VAI TER DENTRO DE APP O NODE_MODULE E DPS ELE VAI FAZER A QUESTÃO DE COPIAR O PACKAGE JSON  E RODAR O NPM INSTALL GERANDO UM NOVO NODE_MUDULES.

CMD [ "npm", "start" ]
